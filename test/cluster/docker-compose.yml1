version: '3.8'
services:
  primary:
    image: marklogicdb/marklogic-db
    container_name: primary_marklogic
    hostname: docker.cluster1-node1.internal
    networks:
      primary_net:
    volumes:
      - primary_marklogic_vol:/var/opt/MarkLogic
    environment:
      MARKLOGIC_INIT: "true"
      MARKLOGIC_ADMIN_USERNAME: admin
      MARKLOGIC_ADMIN_PASSWORD: admin
    ports:
      - "8000:8000"
      - "8001:8001"
      - "7997:7997"
      - "8002:8002"
    mem_limit: 5g

  secondary:
    image: marklogicdb/marklogic-db
    container_name: secondary_marklogic
    hostname: docker.cluster2-node1.internal
    networks:
      secondary_net:
    volumes:
      - secondary_marklogic_vol:/var/opt/MarkLogic
    environment:
      MARKLOGIC_INIT: "true"
      MARKLOGIC_ADMIN_USERNAME: admin
      MARKLOGIC_ADMIN_PASSWORD: admin
    ports:
      - "8100:8000"
      - "8101:8001"
      - "8097:7997"
      - "8102:8002"
    mem_limit: 5g

networks:
  primary_net:
    driver: bridge
  secondary_net:
    driver: bridge

volumes:
  primary_marklogic_vol:
  secondary_marklogic_vol:
